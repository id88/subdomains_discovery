# å­åŸŸåçˆ†ç ´å·¥å…· (Subdomains Discovery)

[![Go Version](https://img.shields.io/badge/Go-1.24+-00ADD8?style=flat&logo=go)](https://golang.org/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

ä¸€ä¸ªé«˜æ€§èƒ½ã€æ¨¡å—åŒ–çš„å­åŸŸåçˆ†ç ´å·¥å…·ï¼Œé‡‡ç”¨ Go è¯­è¨€å¼€å‘ï¼Œæ”¯æŒå¹¶å‘ DNS æŸ¥è¯¢ã€é€šé…ç¬¦æ£€æµ‹å’Œè¿›åº¦æ˜¾ç¤ºã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½å¹¶å‘** - æ”¯æŒè‡ªå®šä¹‰å¹¶å‘æ•°ï¼Œå¿«é€Ÿæ‰«æå¤§é‡å­åŸŸå
- ğŸ¯ **æ™ºèƒ½é€šé…ç¬¦æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹å¹¶è¿‡æ»¤é€šé…ç¬¦ DNS è®°å½•
- ğŸ“Š **å®æ—¶è¿›åº¦æ˜¾ç¤º** - ç›´è§‚çš„è¿›åº¦æ¡ï¼Œæ˜¾ç¤ºæ‰«æè¿›åº¦å’Œé¢„è®¡å‰©ä½™æ—¶é—´
- ğŸ” **å¤š DNS æœåŠ¡å™¨æ”¯æŒ** - å¹¶è¡ŒæŸ¥è¯¢å¤šä¸ª DNS æœåŠ¡å™¨ï¼Œæé«˜æˆåŠŸç‡
- ğŸ›¡ï¸ **å†…ç½‘ IP è¿‡æ»¤** - è‡ªåŠ¨è¿‡æ»¤ç§æœ‰ IP åœ°å€
- ğŸ“ **CSV æ ¼å¼è¾“å‡º** - ç»“æ„åŒ–çš„ç»“æœè¾“å‡ºï¼Œä¾¿äºåç»­åˆ†æ
- ğŸ—ï¸ **æ¨¡å—åŒ–è®¾è®¡** - æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸ“¦ å®‰è£…

### æ–¹å¼ä¸€ï¼šä»æºç ç¼–è¯‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/id88/subdomains_discovery.git
cd subdomains_discovery

# å®‰è£…ä¾èµ–
go mod tidy

# ç¼–è¯‘
go build -o subdomains_discovery.exe

# æˆ–è€…ç›´æ¥è¿è¡Œ
go run main.go -d example.com
```

### æ–¹å¼äºŒï¼šä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬

ä» [Releases](https://github.com/id88/subdomains_discovery/releases) é¡µé¢ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```bash
# æ‰«æç›®æ ‡åŸŸå
./subdomains_discovery.exe -d example.com

# ä½¿ç”¨è‡ªå®šä¹‰å­—å…¸
./subdomains_discovery.exe -d example.com -w custom_dict.txt

# è®¾ç½®å¹¶å‘æ•°å’Œè¶…æ—¶æ—¶é—´
./subdomains_discovery.exe -d example.com -c 200 -t 5

# æŒ‡å®š DNS æœåŠ¡å™¨
./subdomains_discovery.exe -d example.com -dnss "8.8.8.8,1.1.1.1,223.5.5.5"

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶
./subdomains_discovery.exe -d example.com -o results.csv
```

### å®Œæ•´ç¤ºä¾‹

```bash
./subdomains_discovery.exe \
  -d example.com \
  -w dict.txt \
  -c 150 \
  -t 3 \
  -dnss "114.114.114.114,223.5.5.5,8.8.8.8" \
  -o subdomains_example.csv
```

## ğŸ“‹ å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `-d` | string | *å¿…éœ€* | ç›®æ ‡åŸŸåï¼ˆä¾‹å¦‚ï¼šexample.comï¼‰ |
| `-w` | string | `./dict.txt` | å­—å…¸æ–‡ä»¶è·¯å¾„ |
| `-c` | int | `100` | å¹¶å‘æ•° |
| `-t` | int | `3` | DNS æŸ¥è¯¢è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ |
| `-dnss` | string | `114.114.114.114,223.5.5.5` | DNS æœåŠ¡å™¨åˆ—è¡¨ï¼Œé€—å·åˆ†éš” |
| `-o` | string | `subdomains_åŸŸå_æ—¶é—´æˆ³.csv` | è¾“å‡ºæ–‡ä»¶è·¯å¾„ |

## ğŸ“ å­—å…¸æ–‡ä»¶æ ¼å¼

å­—å…¸æ–‡ä»¶æ¯è¡Œä¸€ä¸ªå­åŸŸåå‰ç¼€ï¼Œæ”¯æŒæ³¨é‡Šï¼ˆä»¥ `#` å¼€å¤´ï¼‰ï¼š

```text
# å¸¸ç”¨å­åŸŸå
www
mail
ftp
api
admin
dev
test
blog
shop

# å¼€å‘ç¯å¢ƒ
staging
uat
qa
```

## ğŸ“Š è¾“å‡ºæ ¼å¼

ç»“æœä»¥ CSV æ ¼å¼ä¿å­˜ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š

| å­—æ®µ | è¯´æ˜ |
|------|------|
| `subdomain` | å®Œæ•´çš„å­åŸŸå |
| `ip_address` | IP åœ°å€ï¼ˆå¤šä¸ª IP ç”¨åˆ†å·åˆ†éš”ï¼‰ |
| `cname` | CNAME è®°å½• |
| `ttl` | DNS è®°å½•çš„ TTL å€¼ |
| `record_type` | è®°å½•ç±»å‹ï¼ˆA/CNAME/AAAAï¼‰ |
| `wildcard` | æ˜¯å¦ä¸ºé€šé…ç¬¦è®°å½• |
| `dns_server` | å“åº”çš„ DNS æœåŠ¡å™¨ |

### ç¤ºä¾‹è¾“å‡º

```csv
subdomain,ip_address,cname,ttl,record_type,wildcard,dns_server
www.example.com,93.184.216.34,,3600,A,false,114.114.114.114
mail.example.com,93.184.216.35,,3600,A,false,223.5.5.5
api.example.com,93.184.216.36;93.184.216.37,,1800,A,false,114.114.114.114
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
subdomains_discovery/
â”œâ”€â”€ main.go                 # ä¸»å…¥å£
â”œâ”€â”€ go.mod                  # Go æ¨¡å—å®šä¹‰
â”œâ”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ dict.txt                # é»˜è®¤å­—å…¸æ–‡ä»¶
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.go          # é…ç½®è§£æå’Œç®¡ç†
â”œâ”€â”€ dns/
â”‚   â”œâ”€â”€ client.go          # DNS å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ query.go           # DNS æŸ¥è¯¢é€»è¾‘
â”‚   â””â”€â”€ stats.go           # DNS æ€§èƒ½ç»Ÿè®¡
â”œâ”€â”€ scanner/
â”‚   â””â”€â”€ scanner.go         # æ‰«æå™¨æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ wildcard/
â”‚   â””â”€â”€ detector.go        # é€šé…ç¬¦æ£€æµ‹
â”œâ”€â”€ output/
â”‚   â”œâ”€â”€ result.go          # ç»“æœç»“æ„ä½“
â”‚   â””â”€â”€ csv.go             # CSV è¾“å‡º
â””â”€â”€ utils/
    â”œâ”€â”€ random.go          # éšæœºå­—ç¬¦ä¸²ç”Ÿæˆ
    â”œâ”€â”€ filter.go          # IP åœ°å€è¿‡æ»¤
    â””â”€â”€ progress.go        # è¿›åº¦æ¡æ˜¾ç¤º
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### 1. å¹¶å‘ DNS æŸ¥è¯¢

å·¥å…·ä½¿ç”¨ goroutine å®ç°é«˜å¹¶å‘ DNS æŸ¥è¯¢ï¼Œé€šè¿‡ä¿¡å·é‡æ§åˆ¶å¹¶å‘æ•°ï¼Œé¿å…èµ„æºè€—å°½ï¼š

```go
// å¹¶å‘æ§åˆ¶
semaphore := make(chan struct{}, concurrency)
for _, subdomain := range subdomains {
    go func(sub string) {
        semaphore <- struct{}{}
        defer func() { <-semaphore }()
        // æ‰§è¡Œ DNS æŸ¥è¯¢
    }(subdomain)
}
```

### 2. é€šé…ç¬¦æ£€æµ‹

è‡ªåŠ¨æ£€æµ‹é€šé…ç¬¦ DNS è®°å½•ï¼Œé¿å…è¯¯æŠ¥ï¼š

1. ç”Ÿæˆ 10 ä¸ªéšæœºå­åŸŸå
2. æŸ¥è¯¢è¿™äº›ä¸å­˜åœ¨çš„åŸŸå
3. è®°å½•è¿”å›çš„ IP åœ°å€ä½œä¸ºé€šé…ç¬¦ IP
4. åœ¨æ‰«ææ—¶è¿‡æ»¤è¿™äº› IP

### 3. å¤š DNS æœåŠ¡å™¨å¹¶è¡ŒæŸ¥è¯¢

åŒæ—¶å‘å¤šä¸ª DNS æœåŠ¡å™¨å‘èµ·æŸ¥è¯¢ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªæˆåŠŸå“åº”çš„ç»“æœï¼š

- æé«˜æŸ¥è¯¢æˆåŠŸç‡
- é™ä½å•ç‚¹æ•…éšœå½±å“
- è®°å½•æ¯ä¸ª DNS æœåŠ¡å™¨çš„æ€§èƒ½ç»Ÿè®¡

### 4. è¿›åº¦æ˜¾ç¤º

å®æ—¶æ˜¾ç¤ºæ‰«æè¿›åº¦ï¼š

```
[===========================>                      ] 54.32% (543/1000) è€—æ—¶: 45s é¢„è®¡å‰©ä½™: 38s
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

- ğŸ” **å®‰å…¨æµ‹è¯•** - å‘ç°ç›®æ ‡åŸŸåçš„æ‰€æœ‰å­åŸŸå
- ğŸŒ **èµ„äº§æ”¶é›†** - æ”¶é›†ä¼ä¸šçš„ç½‘ç»œèµ„äº§ä¿¡æ¯
- ğŸ›¡ï¸ **æ¸—é€æµ‹è¯•** - æ‰©å¤§æ”»å‡»é¢ï¼Œå‘ç°æ½œåœ¨å…¥å£
- ğŸ“Š **åŸŸåç›‘æ§** - ç›‘æ§åŸŸåçš„å­åŸŸåå˜åŒ–

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **åˆæ³•ä½¿ç”¨** - ä»…å¯¹æˆæƒçš„åŸŸåè¿›è¡Œæ‰«æï¼Œéµå®ˆç›¸å…³æ³•å¾‹æ³•è§„
2. **é€Ÿç‡æ§åˆ¶** - é¿å…è¿‡é«˜çš„å¹¶å‘æ•°ï¼Œé˜²æ­¢è¢«ç›®æ ‡ DNS æœåŠ¡å™¨é™åˆ¶
3. **ç½‘ç»œç¯å¢ƒ** - ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®šï¼ŒDNS æœåŠ¡å™¨å¯è®¿é—®
4. **å­—å…¸è´¨é‡** - ä½¿ç”¨é«˜è´¨é‡çš„å­—å…¸æ–‡ä»¶å¯ä»¥æé«˜å‘ç°ç‡

## ğŸ”¨ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„è¾“å‡ºæ ¼å¼

åœ¨ `output/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œå®ç°è¾“å‡ºæ¥å£ï¼š

```go
// output/json.go
package output

import (
    "encoding/json"
    "os"
)

func SaveToJSON(results []Result, filename string) error {
    file, err := os.Create(filename)
    if err != nil {
        return err
    }
    defer file.Close()
    
    encoder := json.NewEncoder(file)
    encoder.SetIndent("", "  ")
    return encoder.Encode(results)
}
```

### æ·»åŠ æ–°çš„ DNS æŸ¥è¯¢ç­–ç•¥

åœ¨ `dns/client.go` ä¸­æ‰©å±• `Strategy` å­—æ®µï¼š

```go
type Client struct {
    Strategy string // "parallel", "fallback", "round-robin"
    // ...
}
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- [miekg/dns](https://github.com/miekg/dns) - ä¼˜ç§€çš„ DNS åº“
- æ‰€æœ‰è´¡çŒ®è€…å’Œä½¿ç”¨è€…

## ğŸ“ è”ç³»æ–¹å¼

- æäº¤ Issue: [GitHub Issues](https://github.com/id88/subdomains_discovery/issues)
- é‚®ç®±: your.email@example.com

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v2.0.0 (2025-12-28)

- âœ¨ å®Œå…¨é‡æ„ä»£ç ï¼Œé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡
- ğŸš€ ä¿®å¤ DNS æŸ¥è¯¢è¿”å›å€¼ç±»å‹é”™è¯¯
- âš¡ ä¼˜åŒ–éšæœºå­—ç¬¦ä¸²ç”Ÿæˆï¼Œæ€§èƒ½æå‡æ•°åƒå€
- ğŸ“Š æ·»åŠ å®æ—¶è¿›åº¦æ¡æ˜¾ç¤º
- ğŸ¯ æ”¹è¿›é€šé…ç¬¦æ£€æµ‹é€»è¾‘
- ğŸ›¡ï¸ å¢å¼ºé”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡º
- ğŸ“¦ ä¼˜åŒ–å¹¶å‘æ§åˆ¶æœºåˆ¶

### v1.0.0

- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºæœ¬çš„å­åŸŸåçˆ†ç ´åŠŸèƒ½
- æ”¯æŒå¹¶å‘ DNS æŸ¥è¯¢
- CSV æ ¼å¼è¾“å‡º

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼
